/*
 * STM32F103 RCC register definitions
 * Part of STM32F103 register and peripherals library
 *
 * Dpcumentation available in the provided MD file.
 *
 * (c) 2019 Dmitry Reznikov ontaelio(at)gmail.com
 *
 * Can be freely used according to the GNU GPL license.
 */

#ifndef STM32F103_RCC_REG_H_
#define STM32F103_RCC_REG_H_

#define _RCC_(mem_offset) (*(volatile uint32_t *)(0x40021000 + (mem_offset)))

// registers
#define RCC_CR 0x00
#define RCC_CFGR 0x04
#define RCC_CIR 0x08
#define RCC_APB2RSTR 0x0C
#define RCC_APB1RSTR 0x10
#define RCC_AHBENR 0x14
#define RCC_APB2ENR 0x18
#define RCC_APB1ENR 0x1C
#define RCC_BDCR 0x20
#define RCC_CSR 0x24

#ifndef __STM32F10x_H //avoid redefining if CMSIS library present

// values
#define RCC_APB2RSTR_AFIORST 0x0001
//reserved
#define RCC_APB2RSTR_IOPARST 0x0004
#define RCC_APB2RSTR_IOPBRST 0x0008
#define RCC_APB2RSTR_IOPCRST 0x0010
#define RCC_APB2RSTR_IOPDRST 0x0020
#define RCC_APB2RSTR_IOPERST 0x0040
#define RCC_APB2RSTR_IOPFRST 0x0080
#define RCC_APB2RSTR_IOPGRST 0x0100
#define RCC_APB2RSTR_ADC1RST 0x0200
#define RCC_APB2RSTR_ADC2RST 0x0400
#define RCC_APB2RSTR_TIM1RST 0x0800
#define RCC_APB2RSTR_SPI1RST 0x1000
#define RCC_APB2RSTR_TIM8RST 0x2000
#define RCC_APB2RSTR_USART1RST 0x4000
#define RCC_APB2RSTR_ADC3RST 0x8000
//reserved
//reserved
//reserved
#define RCC_APB2RSTR_TIM9RST  0x00080000
#define RCC_APB2RSTR_TIM10RST 0x00100000
#define RCC_APB2RSTR_TIM11RST 0x00200000
//rest reserved

#define RCC_APB1RSTR_TIM2RST  0x0001
#define RCC_APB1RSTR_TIM3RST  0x0002
#define RCC_APB1RSTR_TIM4RST  0x0004
#define RCC_APB1RSTR_TIM5RST  0x0008
#define RCC_APB1RSTR_TIM6RST  0x0010
#define RCC_APB1RSTR_TIM7RST  0x0020
#define RCC_APB1RSTR_TIM12RST 0x0040
#define RCC_APB1RSTR_TIM13RST 0x0080
#define RCC_APB1RSTR_TIM14RST 0x0100
//reserved
//reserved
#define RCC_APB1RSTR_WWDGRST  0x0800
//reserved
//reserved
#define RCC_APB1RSTR_SPI2RST  0x4000
#define RCC_APB1RSTR_SPI3RST  0x8000
//reserved
#define RCC_APB1RSTR_USART2RST 0x00020000
#define RCC_APB1RSTR_USART3RST 0x00040000
#define RCC_APB1RSTR_USART4RST 0x00080000
#define RCC_APB1RSTR_USART5RST 0x00100000
#define RCC_APB1RSTR_I2C1RST   0x00200000
#define RCC_APB1RSTR_I2C2RST   0x00400000
#define RCC_APB1RSTR_USBRST    0x00800000
//reserved
#define RCC_APB1RSTR_CAN1RST   0x02000000
#define RCC_APB1RSTR_CAN2RST   0x02000000
#define RCC_APB1RSTR_BKPRST    0x08000000
#define RCC_APB1RSTR_PWRRST    0x10000000
#define RCC_APB1RSTR_DACRST    0x20000000
//reserved
//reserved

#define RCC_APB2ENR_AFIOEN 0x0001
//reserved
#define RCC_APB2ENR_IOPAEN 0x0004
#define RCC_APB2ENR_IOPBEN 0x0008
#define RCC_APB2ENR_IOPCEN 0x0010
#define RCC_APB2ENR_IOPDEN 0x0020
#define RCC_APB2ENR_IOPEEN 0x0040
#define RCC_APB2ENR_IOPFEN 0x0080
#define RCC_APB2ENR_IOPGEN 0x0100
#define RCC_APB2ENR_ADC1EN 0x0200
#define RCC_APB2ENR_ADC2EN 0x0400
#define RCC_APB2ENR_TIM1EN 0x0800
#define RCC_APB2ENR_SPI1EN 0x1000
#define RCC_APB2ENR_TIM8EN 0x2000
#define RCC_APB2ENR_USART1EN 0x4000
#define RCC_APB2ENR_ADC3EN 0x8000
//reserved
//reserved
//reserved
#define RCC_APB2ENR_TIM9EN  0x00080000
#define RCC_APB2ENR_TIM10EN 0x00100000
#define RCC_APB2ENR_TIM11EN 0x00200000
//rest reserved

#define RCC_APB1ENR_TIM2EN  0x0001
#define RCC_APB1ENR_TIM3EN  0x0002
#define RCC_APB1ENR_TIM4EN  0x0004
#define RCC_APB1ENR_TIM5EN  0x0008
#define RCC_APB1ENR_TIM6EN  0x0010
#define RCC_APB1ENR_TIM7EN  0x0020
#define RCC_APB1ENR_TIM12EN 0x0040
#define RCC_APB1ENR_TIM13EN 0x0080
#define RCC_APB1ENR_TIM14EN 0x0100
//reserved
//reserved
#define RCC_APB1ENR_WWDGEN  0x0800
//reserved
//reserved
#define RCC_APB1ENR_SPI2EN  0x4000
#define RCC_APB1ENR_SPI3EN  0x8000
//reserved
#define RCC_APB1ENR_USART2EN 0x00020000
#define RCC_APB1ENR_USART3EN 0x00040000
#define RCC_APB1ENR_USART4EN 0x00080000
#define RCC_APB1ENR_USART5EN 0x00100000
#define RCC_APB1ENR_I2C1EN   0x00200000
#define RCC_APB1ENR_I2C2EN   0x00400000
#define RCC_APB1ENR_USBEN    0x00800000
//reserved
#define RCC_APB1ENR_CAN1EN   0x02000000
#define RCC_APB1ENR_CAN2EN   0x04000000
#define RCC_APB1ENR_BKPEN    0x08000000
#define RCC_APB1ENR_PWREN    0x10000000
#define RCC_APB1ENR_DACEN    0x20000000
//reserved
//reserved

#endif //CMSIS stuff

//CMSIS defines these as CAN1
#define RCC_APB1RSTR_CANRST  0x02000000
#define RCC_APB1ENR_CANEN    0x02000000

#endif /* STM32F103_RCC_REG_H_ */
